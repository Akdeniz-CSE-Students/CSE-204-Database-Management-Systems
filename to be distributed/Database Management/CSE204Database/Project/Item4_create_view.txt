CREATE VIEW apartmentManagementSystemDatabase AS
SELECT
h.HousingEstateId,
h.HousingEstateName,
h.SwimmingPoolId AS "HousingEstateSwimmingPoolId",
h.GymId "HousingEstateGymId",
a.ApartmentId,
a.EmployeeId AS "ApartmentEmployeeId",
a.ElevatorId AS "ApartmentElevatorId",
a.ParkingLotId AS "ApartmentParkingLotId",
a.Name AS "ApartmentName",
a.Address,
a.City,
a.NumberOfLevels,
a.NumberOfFlats,
a.BuildDate,
a.LastCleanedDate AS "ApartmentLastCleanedDate",
a.HousingEstateId AS "ApartmentHousingEstateId",
f.FlatId,
f.ApartmentId AS "FlatApartmentId",
f.HowManyRooms,
f.HasAirConditioner,
f.MonthlyRent,
r.ResidentId,
r.FlatId AS "ResidentFladId",
r.GymId AS "ResidentGymId",
r.Name AS "ResidentName",
r.Surname AS "ResidentSurname",
r.IdentityNumber,
r.PhoneNumber AS "ResidentPhoneNumber",
r.Gender AS "ResidentGender",
r.Age as "ResidentAge",
r.RentalDate,
el.ElevatorId,
el.ApartmentId AS "ElevatorApartmentId",
el.Brand,
el.MaxKg,
el.MaxPerson,
el.LastMaintenanceDate,
p.ParkingLotId,
p.EmployeeId AS "ParkingLotEmployeeId",
p.ApartmentId AS "ParkingLotApartmentId",
p.MaxNumberOfCars,
em.EmployeeId,
em.Type,
em.Name AS "EmployeeName",
em.Surname AS "EmployeeSurname",
em.Gender AS "EmployeeGender",
em.PhoneNumber AS "EmployeePhoneNumber",
em.Salary,
em.EmployeeHiredDate,
em.ParkingLotId AS "EmployeeParkingLotId",
s.SwimmingPoolId,
s.EmployeeId AS "SwimmingPoolEmployeeId",
s.Depth,
s.MinAge,
s.OpensAt AS "SwimmingPoolOpensAt",
s.ClosesAt AS "SwimmingPoolClosesAt",
s.LastCleanedDate AS "SwimmingPoolLastCleanedDate",
g.GymId,
g.EmployeeId AS "GymEmployeeId",
g.CurrentPeople,
g.HasSquatRack,
g.MonthlyFee,
g.MaxPeople,
g.OpensAt AS "GymOpensAt",
g.ClosesAt AS "GymClosesAt",
g.LastCleanedDate AS "GymLastCleanedDate"

FROM HousingEstate h
INNER JOIN Apartment a ON a.HousingEstateId = h.HousingEstateId
INNER JOIN Flat f ON f.ApartmentId = a.ApartmentId
INNER JOIN Resident r ON r.flatId = f.flatId
INNER JOIN Elevator el ON el.ApartmentId = a.ApartmentId
INNER JOIN ParkingLot p ON p.ApartmentId = a.ApartmentId
INNER JOIN Employee em ON em.employeeId = a.employeeId
INNER JOIN SwimmingPool s ON s.swimmingPoolId = h.swimmingPoolId
INNER JOIN Gym g ON g.gymId = h.gymId